# TravelersTea

## Project Description

Welcome to Travelerâ€™s Tea, an intuitive and personalized travel planning web app that turns your travel dreams into
detailed itineraries.

Built around user preferences, the app delivers curated plans comprising places to visit, descriptions, and more, all at
your fingertips.

Alongside its planning capabilities, TravelersTea thrives on the collective wisdom of its user community, featuring plan
sharing with others, and shaping a dynamic and interactive travel planning experience.

## Table of Contents

- [Team Members](#team-members)
- [Project Requirements](#project-requirements)
  - [Minimal Requirements](#minimal-requirements)
  - [Standard Requirements](#standard-requirements)
  - [Stretch Requirements](#stretch-requirements)
  - [Limitations](#limitations)
- [Prototypes](#prototypes)
- [Instructions](#instructions)

## Team Members

- Lymeng Naret
- Noreen Chan
- Rithin Kumar
- Vaishnavi Sinha
- Andy Liang

## Project Requirements

#### Minimal Requirements

- [x] Users should be able to input a set of preferences (Destination, Number of Days, Budget, Places per day), to
      generate
      personalized travel plans.
- [x] Users can see destination markers on a map.
- [x] Users can see a description of each destination.
- [x] Users can create, read, update, and delete plan metadata.

#### Standard Requirements

- [x] Autogenerated Pin Icons
- [x] Users can manually update an individual destination within a plan.
- [x] Display ratings of suggested places.
- [x] Login system.
- [x] Colloquial Prompt

#### Stretch Requirements

- [x] Users' Preferences: Compact Mode, Light Mode
- [x] Users can generate plans based on extra notes (e.g. dietary restrictions, travel preferences)
- [x] Entire application should be mobile-friendly
- [x] Share itinerary as a link

## Limitations

- Some locations don't necessarily have corresponding coordinates, this will cause an error
  - Especially more prominent for more obscure Destinations
- Takes time for trips to generate (this should get better with time)
- Can be expensive to deploy at scale

## Prototypes

#### Top-level plan: Homepage

User input

![User Input](mocks/mock-a.png)

#### App Response: Plan Overview

With sidebar closed

![Plan Overview - Closed Sidebar](mocks/mock-b.png)

With sidebar open: Specific details about a day in the plan

![Plan Overview - Open Sidebar](mocks/mock-c.png)

## Instructions

This is a MERN stack project using JavaScript, with auto-linting and formatting set up using ESLint and Prettier. We
use [Yarn Workspaces](https://classic.yarnpkg.com/lang/en/docs/workspaces/) to simplify installation and running
scripts.

#### Prerequisites

1. Install [Node.js](https://nodejs.org/en). This will include Yarn as well.
2. Install [MongoDB](https://www.mongodb.com/docs/manual/installation/).

#### Installation

1. Clone the repository:

```
git clone https://github.com/cpsc455-bugstorm/TravelersTea.git
```

2. Install the dependencies:

```
yarn install
```

Now, you will need `.env` files, one in server and one in client.

3. Create a new file `.env` in the `server` folder:

```
touch server/.env
```

4. Find the correct `<value>` for the following in
   discord's [secret](https://discord.com/channels/1106050152587874364/1110797187463512116) channel.

The content of `server/.env` file should look like this (with the `<value>` replaced with the correct constant) :
`server/.env.example` provides a template for this file.

```
ENV=<value>
MONGO_USERNAME=<value>
MONGO_PASSWORD=<value>
JWT_SECRET=<value>
OPEN_AI_ORG_ID=<value>
OPEN_AI_API_KEY=<value>
GPT_MODEL=<value>
DB_USER_FLAG=<value>
GOOGLE_PLACES_API_KEY=<value>
CLIENT_URL=<value>
```

5. Create a new file `.env` in the `client` folder:

```
touch client/.env
```

6. Find the correct `<value>` for the following in
   discord's [secret](https://discord.com/channels/1106050152587874364/1110797187463512116) channel.

The content of `client/.env` file should look like this (with the `<value>` replaced with the correct constant) :
`client/.env.example` provides a template for this file.

```
REACT_APP_MAPBOX_TOKEN=<value>
REACT_APP_API_URL=<value>
```

#### Running the Project

1. Start both the server and client using [concurrently](https://www.npmjs.com/package/concurrently)

```
yarn start
```

Alternatively, you can start either server or client using the commands below:

```
# starting only server
yarn start:server

# starting only client
yarn start:client
```

follow the `client` link here: http://localhost:3000

follow the `server` link here: http://localhost:5001/api/user

#### Auto-Linting and Formatting

```
# run linter
yarn lint:fix

# check for linting errors
yarn lint

# run formatter
yarn format

# check for formatting errors
yarn format:check
```

We use [Husky](https://typicode.github.io/husky/) to run pre-commit hooks
with [lint-staged](https://github.com/okonet/lint-staged) to run linters on git staged files. This ensures that our code
is formatted correctly when we commit our codes and when we open a pull-request on `main` branch.

#### Troubleshooting tips:

- Restart your IDE to fix tailwind autocomplete.
- Delete all node_modules and do `yarn install` in the root directory.

## Client

### Folder Structure

#### Under `client/src`

- `components`: where react elements go.
  - `common`: reusable components, such as `Button`, `Dropdown`, `Alert` etc.
- `reducers`: put redux reducers here.
- `App.js`: the top-level React app.
- `index.css`: imports tailwind. Try not to modify this.
- `store.js`: configures redux; link any new reducers here.

#### Under `client/public`

This is where assets (e.g. images) go, as well as the `index.html`.

#### tailwind.config.js

Configure tailwind and add custom tailwind keywords.

## Server

### How to see our databases and how to use your own database?

To see some particular database, whether it is the shared one, of your own, follow the steps below.

1. Log in to [Mongo Atlas](https://www.mongodb.com/atlas/database) (press Sign In on the top right)
2. Press `Database` -> `Browse Collection`
   ![image](https://github.com/cpsc455-bugstorm/TravelersTea/assets/69891690/6f477213-5d60-4a99-b9a4-0ce6ff65f468)

3. Here is our database! Our collections (think of SQL Tables), along with other helpful buttons, can be found here:
   ![image](https://github.com/cpsc455-bugstorm/TravelersTea/assets/69891690/b27d3f88-12b9-495d-bb9e-726ae3b1bd44)

To use your own database. Navigate to `config.js` in the `server` folder.

1. Simply change the `DB_USER_FLAG` to your name in all capital letters.
   ![image](https://github.com/cpsc455-bugstorm/TravelersTea/assets/69891690/8afeb6c7-e791-4e63-85ee-b6c41aa1282e)
